# 📊 预测学习系统使用指南

## 🎯 功能说明

系统会**自动记录每次预测**，并在15分钟后自动验证准确性，然后生成优化建议。

---

## 📅 查看报告的方式

### 方式1：自动报告（推荐）

**交易系统运行时自动显示**：

- **每30秒**：简要统计（准确率、总次数）
- **每2.5分钟**：完整学习报告
- **结束时**：最终报告

```
[10/100] 01:25:45
       Price: 0.8150
       Signal: LONG | Score: 4.2
       [LEARNING] 准确率: 62.2% (45次)  ← 每30秒显示

[50/100] 01:32:10

================================================================================
📊 预测学习报告
================================================================================
统计时间: 最近24小时 | 2025-02-20 14:30:00

【总体准确率】
  总预测: 45 次
  正确: 28 次
  准确率: 62.2%
  ...                     ← 每2.5分钟显示完整报告
```

---

### 方式2：随时查看报告

**双击运行**：`查看报告.bat`

或命令行：
```bash
python 查看学习报告.py
```

会显示：
- ✅ 准确率统计
- ✅ 分类准确率（做多/做空）
- ✅ 按评分区间分析
- ✅ 优化建议
- ✅ 推荐参数调整

---

### 方式3：实时监控（推荐）

**双击运行**：`实时监控.bat`

或命令行：
```bash
python 实时监控学习数据.py
```

**效果**：
- 每30秒自动刷新
- 显示最新统计数据
- 显示优化建议
- 显示推荐参数

**适用场景**：
- 交易系统在后台运行
- 你想实时监控学习情况
- 不想看交易日志，只想看统计

---

## 📈 报告解读

### 准确率报告

```
【总体准确率】
  总预测: 45 次        ← 总共验证了多少次预测
  正确: 28 次         ← 预测正确的次数
  准确率: 62.2%       ← 总体准确率

【分类准确率】
  做多(UP): 18/25 (72.0%)   ← 做多YES的准确率
  做空(DOWN): 10/20 (50.0%) ← 做空YES的准确率

  平均评分: 4.2
  平均置信度: 68.3%
```

**解读**：
- ✅ 准确率 ≥ 60%：很好
- ⚠️ 准确率 50-60%：一般
- ✗ 准确率 < 50%：需要调整

---

### 按评分区间分析

```
【按评分区间分析】
  评分区间      次数   正确   准确率   平均置信度
  ─────────────────────────────────────────
  极强 (≥10)     12    10     83.3%     85.2%
  强 (7-10)      18    12     66.7%     72.1%
  中 (5-7)       10     5     50.0%     65.0%
```

**解读**：
- **极强 (≥10)** 准确率 83.3% → 高评分信号很可靠
- **强 (7-10)** 准确率 66.7% → 可以交易
- **中 (5-7)** 准确率 50.0% → 避免在此区间交易

**行动**：
- 如果"极强"区间准确率 ≥ 70%，提高评分阈值到 7
- 如果"中"区间准确率 < 50%，当前阈值已经很好

---

### 优化建议

```
【优化建议】
  1. 做多信号准确率更高，做多信号更可靠
  2. 评分区间 '极强 (≥10)' 准确率最高 (83.3%)，建议重点关注
  3. 高置信度(≥70%)预测平均准确率 78.5%，建议只在置信度≥70%时交易
```

**解读**：
1. **做多更可靠** → 优先做多信号
2. **高评分准确** → 提高评分阈值
3. **高置信度准确** → 提高置信度阈值

---

### 推荐参数调整

```
【推荐参数调整】
  min_confidence: 0.30 → 0.70
  min_long_score: 2.5 → 7.0

调整原因：
  • 高置信度准确率 78.5% vs 总体 62.2%
  • 高评分(≥7)准确率 83.3% vs 总体 62.2%
```

**解读**：
- 系统分析发现：高置信度(≥70%)的准确率是 78.5%
- 比总体准确率(62.2%)高很多
- **建议**：只在高置信度时交易

**是否采纳**：
- ✅ **采纳**：修改 `auto_trader_ankr.py` 中的参数
- ❌ **不采纳**：保持当前参数，继续观察

---

## 🔧 如何调整参数

### 步骤1：打开配置文件

编辑 `auto_trader_ankr.py`，找到第 56-62 行：

```python
'signal': {
    'min_confidence': 0.30,      # 当前: 30%
    'min_long_score': 2.5,        # 当前: 2.5
    'min_short_score': -2.5,      # 当前: -2.5
    'balance_zone_min': 0.45,
    'balance_zone_max': 0.55,
},
```

### 步骤2：修改参数

根据报告建议，修改为：

```python
'signal': {
    'min_confidence': 0.70,      # 改为 70%
    'min_long_score': 7.0,        # 改为 7.0
    'min_short_score': -7.0,      # 改为 -7.0
    'balance_zone_min': 0.45,
    'balance_zone_max': 0.55,
},
```

### 步骤3：保存并重启

1. 保存文件
2. 停止当前运行的系统
3. 双击 `启动优化版.bat` 重新启动

---

## ⚠️ 注意事项

### 1. 数据积累需要时间

- **首次运行**：至少需要15分钟才能有验证数据
- **可靠统计**：建议运行至少4小时（16个市场）
- **最佳统计**：运行24小时以上

### 2. 不要频繁调整参数

- ❌ **不好**：每30分钟调整一次
- ✅ **好**：每天查看一次，根据24小时数据调整
- ✅ **最好**：运行3-7天，根据长期数据调整

### 3. 市场变化

- 市场特征会变化（牛市/熊市/震荡）
- 建议每周回顾一次
- 如果准确率突然下降，考虑调整参数

---

## 📂 相关文件

| 文件 | 用途 |
|------|------|
| `auto_trader_ankr.py` | 主交易系统（已集成学习） |
| `prediction_learning_polymarket.py` | 学习系统核心 |
| `btc_15min_predictions.db` | 学习数据库 |
| `查看报告.bat` | 查看完整报告 |
| `实时监控.bat` | 实时监控数据 |
| `查看学习报告.py` | 报告查看脚本 |
| `实时监控学习数据.py` | 实时监控脚本 |

---

## 🎓 总结

**查看报告的最佳方式**：

1. **交易时**：系统自动显示（每2.5分钟）
2. **随时查看**：双击 `查看报告.bat`
3. **实时监控**：双击 `实时监控.bat`（独立窗口）

**调整参数的时机**：

- ✅ 运行24小时后，根据准确率调整
- ✅ 每周回顾一次，适应市场变化
- ❌ 不要频繁调整（让系统有时间学习）
