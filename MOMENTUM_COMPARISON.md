# 动量计算对比分析

## 🎯 核心区别

### 图片平台的超短线动量

```
Momentum 30s: -2.3
Momentum 60s: -24.6
Momentum 120s: -27.9
```

**特点**：
- **时间窗口**: 30秒 / 60秒 / 120秒
- **数据源**: Binance BTC/USDT 现货价格
- **更新频率**: 每秒更新（实时WebSocket）
- **计算方式**: (当前价格 - N秒前价格) / N秒前价格 × 100
- **精度**: 毫秒级
- **用途**: HFT高频交易

**计算示例**：
```python
# 30秒动量
price_30s_ago = get_binance_price(30_seconds_ago)
price_now = get_binance_price(now)

momentum_30s = (price_now - price_30s_ago) / price_30s_ago * 100
# 例如: (68250 - 68400) / 68400 × 100 = -0.22%
```

---

### 我们的动量计算

```python
# price_momentum: 10周期价格动量
if len(price_history) >= 10:
    recent = price_history[-10:]
    momentum = (recent[-1] - recent[0]) / recent[0] * 100
    momentum_score = max(-10, min(10, momentum * 2))

# trend_strength: 3周期趋势强度
if len(price_history) >= 3:
    short_trend = (price_history[-1] - price_history[-3]) / price_history[-3] * 100
    trend_score = max(-5, min(5, short_trend * 3))
```

**特点**：
- **时间窗口**: 10个扫描点 / 3个扫描点
- **数据源**: Polymarket YES/NO 代币价格
- **更新频率**: 每3秒扫描一次
- **计算方式**: (最新价格 - N个点前价格) / N个点前价格 × 100
- **精度**: 秒级（受扫描频率限制）
- **用途**: 15分钟二元期权

**计算示例**：
```python
# price_momentum: 10个点
price_history = [0.32, 0.33, 0.34, 0.345, 0.35, 0.355, 0.36, 0.365, 0.37, 0.38]
#           ↑起点                                                    ↑当前点

momentum = (0.38 - 0.32) / 0.32 × 100 = +18.75%
momentum_score = 18.75 × 2 = 37.5 → 限制在±10内 → +10.0

# 实际时间跨度: 10个点 × 3秒/点 = 30秒（理想情况）
# 但Polymarket价格更新不规律，实际可能是30-60秒
```

---

## 📊 详细对比表

| 维度 | 图片平台（超短线） | 我们的系统 | 差异 |
|------|------------------|-----------|------|
| **时间窗口** | 30s/60s/120s | ~30s（10点）/ ~9s（3点） | 类似精度 |
| **数据源** | Binance现货BTC | Polymarket YES/NO代币 | 不同市场 |
| **更新频率** | 每秒（WebSocket） | 每3秒（轮询） | 我们更慢 |
| **时间精度** | 精确到秒 | 约数（3秒粒度） | 我们更粗糙 |
| **价格粒度** | $0.01 (68450.00) | $0.01 (0.38) | 相同粒度 |
| **计算方式** | (当前-过去)/过去 | (当前-过去)/过去 | 相同 |
| **分数转换** | 直接使用百分比 | ×系数后限制在±10 | 我们有后处理 |
| **用途** | HFT高频交易 | 15分钟二元期权 | 不同应用 |

---

## 🔍 关键区别

### 1. 时间窗口的"实际时长"

#### 图片平台（精确）
```python
# 30秒动量 = 精确的30秒
time_30s_ago = current_time - timedelta(seconds=30)
price_30s_ago = get_price_at(time_30s_ago)
```

**实际时长**: 30秒（精确）

---

#### 我们的系统（近似）
```python
# 10个点 ≈ 30秒（但不确定）
price_history = deque(maxlen=20)
# 每3秒添加一次价格点

# 10个点的实际时间跨度：
# 理想情况: 10 × 3秒 = 30秒
# 实际情况: 30-60秒（取决于市场更新频率）
```

**实际时长**: 30-60秒（不精确）

---

### 2. 数据源的本质差异

#### Binance现货BTC（图片平台）
```
价格: $68,250.50
波动: ±$50-500/分钟
成交量: 数亿美元/分钟
参与者: 全球机构、散户、套利者
```

**特点**：
- ✅ 流动性极高
- ✅ 价格连续
- ✅ 套利机会多
- ✅ 反应快

---

#### Polymarket YES/NO代币（我们的系统）
```
价格: $0.38 (YES代币)
波动: ±$0.01-0.05/分钟
成交量: 几千-几万美元/分钟
参与者: 预测市场交易者
```

**特点**：
- ⚠️ 流动性低
- ⚠️ 价格不连续（可能有跳空）
- ⚠️ 更新不规律
- ⚠️ 反应慢

---

### 3. 超短线动量的适用性

#### 图片平台适合超短动量

```python
# 为什么可以用30s/60s/120s？
1. Binance流动性高 → 价格连续变化
2. WebSocket实时推送 → 每秒都有数据
3. HFT交易 → 需要捕捉毫秒级机会
4. 现货市场 → 趋势持续性好
```

**示例**：
```
30秒: 从$68,200跌到$68,150 (-0.07%)
60秒: 从$68,250跌到$68,000 (-0.37%)
120秒: 从$68,300跌到$67,800 (-0.73%)

→ 可以看到明显的下跌趋势
→ 适合做短线交易
```

---

#### 我们的系统不适合超短动量

```python
# 为什么不适合30s/60s/120s？
1. Polymarket流动性低 → 价格经常跳空
2. 每3秒轮询 → 丢失中间数据
3. 15分钟周期 → 短期噪音多
4. 二元期权 → 趋势判断更重要
```

**示例**：
```
Polymarket YES代币价格:
00:00: $0.38
00:03: $0.38 (没变化)
00:06: $0.39 (跳空!)
00:09: $0.39
00:12: $0.38 (跳空!)
00:15: $0.37

→ 30秒内看不出趋势（只有跳空）
→ 120秒内也是随机波动
→ 不适合用超短动量
```

---

## 💡 为什么我们用"扫描点"而不是"精确时间"

### 原因1: Polymarket API限制

```python
# 我们只能通过轮询获取价格
response = requests.get('https://gamma-api.polymarket.com/market/...')
price = response['price']['token']

# 每3秒调用一次
# 无法获得中间的价格数据
# 无法实现"精确30秒"的动量
```

---

### 原因2: 15分钟市场的特性

```python
# 15分钟二元期权的特点:
- 价格在0-1之间
- 大部分时间在0.3-0.7之间
- 趋势形成需要数分钟
- 超短噪音多

# 超短动量的问题:
- 30秒的价格变化可能是随机噪音
- 120秒的趋势可能还没形成
- 容易被假信号误导
```

---

### 原因3: 我们的动量已经够短

```python
# price_momentum: 10个点
# 实际时间: 约30-60秒
# 已经是"超短"了

# trend_strength: 3个点
# 实际时间: 约9-27秒
# 更是"超短"

# 但为什么我们不用"30s/60s/120s"？
# 因为数据源不支持，市场特性也不适合
```

---

## 📈 实际效果对比

### 案例: 下跌趋势

#### 图片平台（Binance现货）
```
时间: 14:32:15
BTC价格: $68,250

30s动量: -2.3  (30秒内下跌0.02%)
60s动量: -24.6 (60秒内下跌0.36%)
120s动量: -27.9 (120秒内下跌0.41%)

→ 可以看到明显的下跌趋势
→ 适合做空
→ 超短动量有效
```

---

#### 我们的系统（Polymarket YES代币）
```
时间: 14:32:15
YES价格: $0.38

price_momentum (10点): +2.5  (30-60秒内上涨1.25%)
trend_strength (3点): +1.2   (9-27秒内上涨0.4%)

→ 看到上涨趋势
→ 适合做多
→ 但这个趋势可能只是短期波动
→ 不代表15分钟后的结果
```

---

## 🎯 结论

### 核心区别

| 维度 | 图片平台超短动量 | 我们的动量 |
|------|----------------|-----------|
| **数据源** | Binance现货（高频） | Polymarket（低频） |
| **时间精度** | 精确到秒 | 扫描点（约3秒粒度） |
| **适用场景** | HFT高频交易 | 15分钟二元期权 |
| **有效性** | 高（流动性好） | 中（流动性差） |
| **噪音比** | 低 | 高 |

---

### 为什么我们不需要改变

1. **数据源限制**
   - Polymarket每3秒才更新一次
   - 无法实现真正的"30s精确动量"

2. **市场特性不同**
   - 15分钟二元期权不需要毫秒级精度
   - 超短噪音多，容易误判

3. **当前动量已经够短**
   - 10个点 ≈ 30-60秒
   - 3个点 ≈ 9-27秒
   - 已经捕捉到短期变化

4. **我们有其他指标**
   - Oracle CVD（1m/5m）捕捉资金流
   - UT Bot捕捉趋势
   - Session Memory捕捉历史规律

---

## ✅ 建议

### 保持当前动量计算

```python
# price_momentum: 10个点（约30-60秒）
momentum = (recent[-1] - recent[0]) / recent[0] * 100

# trend_strength: 3个点（约9-27秒）
short_trend = (price_history[-1] - price_history[-3]) / price_history[-3] * 100
```

**理由**：
- ✅ 已经足够短
- ✅ 适合市场特性
- ✅ 与扫描频率匹配
- ✅ 不需要超短动量

---

### 如果想要更短的时间窗口

```python
# 可以增加更短的动量指标
# 但要考虑是否真的需要

# 例如：5个点的超短动量
if len(price_history) >= 5:
    ultra_short = (price_history[-1] - price_history[-5]) / price_history[-5] * 100
    # 实际时间: 约15-30秒
```

但我不建议这样做，因为：
- ❌ Polymarket流动性差，超短动量不可靠
- ❌ 15分钟周期不需要这么短的窗口
- ❌ 增加复杂度，效果未必更好

---

*最后更新: 2026-03-01*
